!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cytoscapeEdgehandles=e():t.cytoscapeEdgehandles=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=13)}([function(t,e,n){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.filter(function(t){return null!=t}).forEach(function(e){Object.keys(e).forEach(function(n){return t[n]=e[n]})}),t}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i=n(11),r=n(0);t.exports=function(t){return new i(r({cy:this},t))}},function(t,e,n){"use strict";function i(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var t=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,t),window.addEventListener("touchmove",this.preventDefault,t),window.addEventListener("wheel",this.preventDefault,t)}return this}function r(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var t=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,t),window.removeEventListener("touchmove",this.preventDefault,t),window.removeEventListener("wheel",this.preventDefault,t)}return this}function o(){var t=this.cy;return this.lastPanningEnabled=t.panningEnabled(),this.lastZoomingEnabled=t.zoomingEnabled(),this.lastBoxSelectionEnabled=t.boxSelectionEnabled(),this}t.exports={disableGestures:i,resetGestures:r,saveGestureState:o}},function(t,e,n){"use strict";function i(){var t=this,e=this.cy,n=this.options;return this.addListener(e,"drag",function(){return t.grabbingNode=!0}),this.addListener(e,"free",function(){return t.grabbingNode=!1}),this.addListener(e,"tapstart","node",function(e){var n=e.target;t.drawMode&&t.start(n)}),this.addListener(e,"tapdrag",function(e){t.update(e.position)}),this.addListener(e,"tapdragover","node",function(e){n.snap||t.preview(e.target)}),this.addListener(e,"tapdragout","node",function(e){n.snap||t.unpreview(e.target)}),this.addListener(e,"tapend",function(){t.stop()}),this}t.exports={addCytoscapeListeners:i}},function(t,e,n){"use strict";var i={canConnect:function(t,e){return!t.same(e)},edgeParams:function(t,e){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0};t.exports=i},function(t,e,n){"use strict";function i(t){var e=this.cy;return this.drawMode=null!=t?t:!this.drawMode,this.drawMode?(this.prevUngrabifyState=e.autoungrabify(),e.autoungrabify(!0),this.emit("drawon")):(e.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this}function r(){return this.toggleDrawMode(!0)}function o(){return this.toggleDrawMode(!1)}t.exports={toggleDrawMode:i,enableDrawMode:r,disableDrawMode:o}},function(t,e,n){"use strict";function i(t,e,n){var i={};return h(i,e,t),h(i.data,e.data,t.data),l(e.classes)?i.classes=e.classes+" "+n:f(e.classes)?i.classes=e.classes.join(" ")+" "+n:i.classes=n,i}function r(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy,n=(this.options,this.presumptiveTargets),r=this.previewEles,o=this.active,s=this.sourceNode,a=this.targetNode,u=t?"eh-preview":"",c=e.collection(),h=this.canConnect(a);if(o&&h){if(!a||0===a.size())return r.remove(),void this.emit("cancel",this.mp(),s,n);if(!t)return r.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),s,a,r);var l=e.add(i({group:"edges",data:{source:s.id(),target:a.id()}},this.edgeParams(a),u));return c=c.merge(l),t?(this.previewEles=c,c.style("events","no")):(c.style("events",""),this.emit("complete",this.mp(),s,a,c)),this}}function o(){return this.makeEdges(!0),this}function s(){return this.previewEles.nonempty()&&this.previewEles.inside()}function a(){return this.previewShown()&&this.previewEles.remove(),this}function u(){var t=this,e=this.sourceNode,n=this.ghostNode,i=this.cy,r=this.mx,o=this.my,s=r,a=o,u=void 0,c=void 0;if(e)return n&&0!==n.length&&!n.removed()||(c=this.ghostEles=i.collection(),i.batch(function(){n=t.ghostNode=i.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}}),n.style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var r={};u=i.add(h({},r,{group:"edges",data:h({},r.data,{source:e.id(),target:n.id()}),classes:"eh-ghost eh-ghost-edge"})),u.style({events:"no"})}),c.merge(n).merge(u)),n.position({x:s,y:a}),this}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=n(0),l=function(t){return(void 0===t?"undefined":c(t))===c("")},f=function(t){return(void 0===t?"undefined":c(t))===c([])&&null!=t.length};t.exports={makeEdges:r,makePreview:o,removePreview:a,previewShown:s,updateEdge:u}},function(t,e,n){"use strict";function i(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this}function r(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}t.exports={disableEdgeEvents:i,enableEdgeEvents:r}},function(t,e,n){"use strict";function i(){return this.enabled=!0,this.emit("enable"),this}function r(){return this.enabled=!1,this.emit("disable"),this}t.exports={enable:i,disable:r}},function(t,e,n){"use strict";function i(t){var e=this.previewEles,n=this.ghostEles,i=function(t){return e.anySame(t)},r=function(t){return n.anySame(t)},o=this.enabled,s=this.active,a=this.grabbingNode;return o&&!s&&!a&&null!=t&&t.nonempty()&&!function(t){return i(t)||r(t)}(t)}function r(t){return this.canStartOn(t)&&this.drawMode}function o(t){return this.canStartOn(t)&&!this.drawMode}function s(t){var e=this;if(this.canStartOn(t)){this.active=!0,this.sourceNode=t,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var n=function(t){return t.id()};this.canConnect=f(function(t){return e.options.canConnect(e.sourceNode,t)},n),this.edgeParams=f(function(t){return e.options.edgeParams(e.sourceNode,t)},n),this.emit("start",this.hp(),t)}}function a(t){if(this.active){var e=t;return this.mx=e.x,this.my=e.y,this.updateEdge(),this.throttledSnap(),this}}function u(){if(!this.active||!this.options.snap)return!1;var t=this.cy,e=this.targetNode,n=this.options.snapThreshold,i=this.mp(),r=this.previewEles,o=this.ghostNode,s=function(t){return d*Math.max(t.outerWidth(),t.outerHeight())/2},a=function(t,e,n,i){var r=n-t,o=i-e;return r*r+o*o},u=function(t,e){return a(t.x,t.y,e.x,e.y)},c=function(t){return u(t.position(),i)},h=function(t){var e=s(t),i=e+n;return i*i},l=function(t){return c(t)<=h(t)},f=function(t){var e=t.position(),n=t.outerWidth()/2,r=t.outerHeight()/2,o=e.x,s=e.y,u=i.x,c=i.y,h=o-n,l=o+n,f=s-r,d=s+r,p=h<=u&&u<=l,v=f<=c&&c<=d;if(p&&v)return 0;if(p){var g=c-f,y=c-d;return Math.min(g*g,y*y)}if(v){var m=u-h,b=u-l;return Math.min(m*m,b*b)}return u<h&&c<f?a(u,c,h,f):u>l&&c<f?a(u,c,l,f):u<h&&c>d?a(u,c,h,d):a(u,c,l,d)},p=function(t,e){return f(t)-f(e)},v=p,g=function(t){var e=i,n=t.outerWidth(),r=n/2,o=t.outerHeight(),s=o/2,a=t.position(),u=a.x-r,c=a.x+r,h=a.y-s,l=a.y+s;return u<=e.x&&e.x<=c&&h<=e.y&&e.y<=l},y=function(t){return t.same(r)||t.same(o)},m=t.nodes(function(t){return!y(t)&&l(t)}).sort(v),b=!1;e.nonempty()&&!l(e)&&this.unpreview(e);for(var w=0;w<m.length;w++){var E=m[w];if((!E.isParent()||!g(E))&&((!E.isChild()||g(E.parent()))&&(E.same(e)||this.preview(E,!1)))){b=!0;break}}return b}function c(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.options,r=this.sourceNode,o=this.ghostNode,s=this.ghostEles,a=this.presumptiveTargets,u=this.previewEles,c=this.active,h=r,l=t.same(o),f=!this.canConnect(t),d=t.same(this.targetNode);if(!c||l||f||d)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var p=function(){e.targetNode=t,a.merge(t),t.addClass("eh-presumptive-target"),t.addClass("eh-target"),e.emit("hoverover",e.mp(),h,t),t.addClass("eh-preview"),s.addClass("eh-preview-active"),r.addClass("eh-preview-active"),t.addClass("eh-preview-active"),e.makePreview(),e.emit("previewon",e.mp(),h,t,u)};return n&&i.hoverDelay>0?this.previewTimeout=setTimeout(p,i.hoverDelay):p(),!0}function h(t){if(this.active){var e=this.previewTimeout,n=this.sourceNode,i=this.previewEles,r=this.ghostEles,o=this.cy;clearTimeout(e),this.previewTimeout=null;var s=n;return t.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),r.removeClass("eh-preview-active"),n.removeClass("eh-preview-active"),this.targetNode=o.collection(),this.removePreview(s,t),this.emit("hoverout",this.mp(),s,t),this.emit("previewoff",this.mp(),s,t,i),this}}function l(){if(this.active){var t=this.sourceNode,e=this.targetNode,n=this.ghostEles,i=this.presumptiveTargets;return clearTimeout(this.previewTimeout),t.removeClass("eh-source eh-preview-active"),e.removeClass("eh-target eh-preview eh-hover eh-preview-active"),i.removeClass("eh-presumptive-target"),this.makeEdges(),n.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),t),this}}var f=n(14),d=Math.sqrt(2);t.exports={start:s,update:a,preview:c,unpreview:h,stop:l,snap:u,canStartOn:i,canStartDrawModeOn:r,canStartNonDrawModeOn:o}},function(t,e,n){"use strict";function i(t){var e=t.cy;this.cy=e,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=o({},r,t),this.saveGestureState(),this.addListeners(),this.throttledSnap=s(this.snap.bind(this),1e3/t.snapFrequency),this.preventDefault=function(t){return t.preventDefault()},this.canConnect=function(){return!1};var n=!1;try{var i=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,i)}catch(t){}this.windowListenerOptions=!n||{capture:!0,passive:!1}}var r=n(5),o=n(0),s=n(15),a=n(3),u=n(4),c=n(6),h=n(7),l=n(9),f=n(10),d=n(12),p=n(8),v=i.prototype={},g=function(t){return o(v,t)};v.destroy=function(){this.removeListeners()},v.setOptions=function(t){o(this.options,t)},v.mp=function(){return{x:this.mx,y:this.my}},v.hp=function(){return{x:this.hx,y:this.hy}},v.clearCollections=function(){var t=this.cy;this.previewEles=t.collection(),this.ghostEles=t.collection(),this.ghostNode=t.collection(),this.sourceNode=t.collection(),this.targetNode=t.collection(),this.presumptiveTargets=t.collection()},[a,u,c,h,l,f,d,p].forEach(g),t.exports=i},function(t,e,n){"use strict";function i(){var t=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return t.destroy()}),this}function r(){for(var t=this.listeners.length-1;t>=0;t--){var e=this.listeners[t];this.removeListener(e.target,e.event,e.selector,e.callback,e.options)}return this}function o(t,e,n,i,r){return(void 0===n?"undefined":h(n))!==h("")&&(i=n,r=i,n=null),null==r&&(r=!1),{target:t,event:e,selector:n,callback:i,options:r}}function s(t){return t instanceof Element}function a(t,e,n,i,r){var a=o(t,e,n,i,r);return this.listeners.push(a),s(a.target)?a.target.addEventListener(a.event,a.callback,a.options):a.selector?a.target.addListener(a.event,a.selector,a.callback,a.options):a.target.addListener(a.event,a.callback,a.options),this}function u(t,e,n,i,r){for(var a=o(t,e,n,i,r),u=this.listeners.length-1;u>=0;u--){var c=this.listeners[u];if(!(a.target!==c.target||a.event!==c.event||null!=a.selector&&a.selector!==c.selector||null!=a.callback&&a.callback!==c.callback)){this.listeners.splice(u,1),s(a.target)?a.target.removeEventListener(a.event,a.callback,a.options):a.selector?a.target.removeListener(a.event,a.selector,a.callback,a.options):a.target.removeListener(a.event,a.callback,a.options);break}}return this}function c(t,e){for(var n=this.cy,i=arguments.length,r=Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return n.emit({type:"eh"+t,position:e},r),this}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={addListener:a,addListeners:i,removeListener:u,removeListeners:r,emit:c}},function(t,e,n){"use strict";var i=n(2),r=function(t){t&&t("core","edgehandles",i)};"undefined"!=typeof cytoscape&&r(cytoscape),t.exports=r},function(t,e,n){(function(e){function n(t,e){return null==t?void 0:t[e]}function i(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function o(){this.__data__=Y?Y(null):{}}function s(t){return this.has(t)&&delete this.__data__[t]}function a(t){var e=this.__data__;if(Y){var n=e[t];return n===P?void 0:n}return J.call(e,t)?e[t]:void 0}function u(t){var e=this.__data__;return Y?void 0!==e[t]:J.call(e,t)}function c(t,e){return this.__data__[t]=Y&&void 0===e?P:e,this}function h(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function l(){this.__data__=[]}function f(t){var e=this.__data__,n=_(e,t);return!(n<0)&&(n==e.length-1?e.pop():V.call(e,n,1),!0)}function d(t){var e=this.__data__,n=_(e,t);return n<0?void 0:e[n][1]}function p(t){return _(this.__data__,t)>-1}function v(t,e){var n=this.__data__,i=_(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function g(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function y(){this.__data__={hash:new r,map:new(X||h),string:new r}}function m(t){return S(this,t).delete(t)}function b(t){return S(this,t).get(t)}function w(t){return S(this,t).has(t)}function E(t,e){return S(this,t).set(t,e),this}function _(t,e){for(var n=t.length;n--;)if(T(t[n][0],e))return n;return-1}function x(t){return!(!D(t)||L(t))&&(k(t)||i(t)?Q:W).test(N(t))}function S(t,e){var n=t.__data__;return O(e)?n["string"==typeof e?"string":"hash"]:n.map}function j(t,e){var i=n(t,e);return x(i)?i:void 0}function O(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function L(t){return!!U&&U in t}function N(t){if(null!=t){try{return Z.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function C(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(M);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new(C.Cache||g),n}function T(t,e){return t===e||t!==t&&e!==e}function k(t){var e=D(t)?K.call(t):"";return e==G||e==$}function D(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var M="Expected a function",P="__lodash_hash_undefined__",G="[object Function]",$="[object GeneratorFunction]",F=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,B="object"==typeof e&&e&&e.Object===Object&&e,I="object"==typeof self&&self&&self.Object===Object&&self,z=B||I||Function("return this")(),q=Array.prototype,A=Function.prototype,H=Object.prototype,R=z["__core-js_shared__"],U=function(){var t=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Z=A.toString,J=H.hasOwnProperty,K=H.toString,Q=RegExp("^"+Z.call(J).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=q.splice,X=j(z,"Map"),Y=j(Object,"create");r.prototype.clear=o,r.prototype.delete=s,r.prototype.get=a,r.prototype.has=u,r.prototype.set=c,h.prototype.clear=l,h.prototype.delete=f,h.prototype.get=d,h.prototype.has=p,h.prototype.set=v,g.prototype.clear=y,g.prototype.delete=m,g.prototype.get=b,g.prototype.has=w,g.prototype.set=E,C.Cache=g,t.exports=C}).call(e,n(1))},function(t,e,n){(function(e){function n(t,e,n){function i(e){var n=v,i=g;return v=g=void 0,S=e,m=t.apply(i,n)}function o(t){return S=t,b=setTimeout(h,e),j?i(t):m}function s(t){var n=t-w,i=t-S,r=e-n;return O?_(r,y-i):r}function c(t){var n=t-w,i=t-S;return void 0===w||n>=e||n<0||O&&i>=y}function h(){var t=x();if(c(t))return l(t);b=setTimeout(h,s(t))}function l(t){return b=void 0,L&&v?i(t):(v=g=void 0,m)}function f(){void 0!==b&&clearTimeout(b),S=0,v=w=g=b=void 0}function d(){return void 0===b?m:l(x())}function p(){var t=x(),n=c(t);if(v=arguments,g=this,w=t,n){if(void 0===b)return o(w);if(O)return b=setTimeout(h,e),i(w)}return void 0===b&&(b=setTimeout(h,e)),m}var v,g,y,m,b,w,S=0,j=!1,O=!1,L=!0;if("function"!=typeof t)throw new TypeError(u);return e=a(e)||0,r(n)&&(j=!!n.leading,O="maxWait"in n,y=O?E(a(n.maxWait)||0,e):y,L="trailing"in n?!!n.trailing:L),p.cancel=f,p.flush=d,p}function i(t,e,i){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError(u);return r(i)&&(o="leading"in i?!!i.leading:o,s="trailing"in i?!!i.trailing:s),n(t,e,{leading:o,maxWait:e,trailing:s})}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){return!!t&&"object"==typeof t}function s(t){return"symbol"==typeof t||o(t)&&w.call(t)==h}function a(t){if("number"==typeof t)return t;if(s(t))return c;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var n=d.test(t);return n||p.test(t)?v(t.slice(2),n?2:8):f.test(t)?c:+t}var u="Expected a function",c=NaN,h="[object Symbol]",l=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,p=/^0o[0-7]+$/i,v=parseInt,g="object"==typeof e&&e&&e.Object===Object&&e,y="object"==typeof self&&self&&self.Object===Object&&self,m=g||y||Function("return this")(),b=Object.prototype,w=b.toString,E=Math.max,_=Math.min,x=function(){return m.Date.now()};t.exports=i}).call(e,n(1))}])});